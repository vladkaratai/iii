<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://sdk.twilio.com/js/client/v1.14/twilio.min.js"></script>
</head>
<body>
    <h2>üìû C ‚Äî –ì–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–≤–æ–Ω–∫–∏</h2>
  <button id="answer">‚úÖ –ü–æ–¥–Ω—è—Ç—å —Ç—Ä—É–±–∫—É</button>
  <button id="reject">‚ùå –°–±—Ä–æ—Å–∏—Ç—å –∑–≤–æ–Ω–æ–∫</button>
  <script>
    const CREATOR_ID = 'C';
  
    fetch(`https://burndial-twilio-cron.onrender.com/token-c?creator_id=C`)
      .then(r => r.json())
      .then(data => {
        const device = new Twilio.Device(data.token);
  
        device.on('register', () => {
          console.log('‚úÖ Client –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
        });
  
        device.on('error', err => {
          console.error('‚ùå –û—à–∏–±–∫–∞ Client:', err);
        });
  
        device.on('incoming', conn => {
          console.log('üìû –ó–≤–æ–Ω–æ–∫ –æ—Ç A! –ù–∞–∂–º–∏ "–û—Ç–≤–µ—Ç–∏—Ç—å"');
          document.getElementById('answer').onclick = () => {
            console.log('‚úÖ –ü–æ–¥–Ω—è–ª —Ç—Ä—É–±–∫—É');
            conn.accept();
          };
          document.getElementById('reject').onclick = () => {
            console.log('‚ùå –°–±—Ä–æ—Å–∏–ª –∑–≤–æ–Ω–æ–∫');
            conn.reject();
          };
        });
  
        device.register();
      })
      .catch(err => console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–∫–µ–Ω–∞:', err));
  </script>
</body>
</html>
